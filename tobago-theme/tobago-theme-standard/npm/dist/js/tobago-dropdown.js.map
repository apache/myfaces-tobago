{"version":3,"file":"tobago-dropdown.js","sourceRoot":"../ts/","sources":["tobago-dropdown.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;GAeG;AAEH,MAAM,mBAAmB,GAAG;IAC1B,IAAI,EAAE,sBAAsB;IAC5B,MAAM,EAAE,wBAAwB;IAChC,IAAI,EAAE,sBAAsB;IAC5B,KAAK,EAAE,uBAAuB;CAC/B,CAAC;AAEF;;;GAGG;AACH,MAAM,QAAS,SAAQ,WAAW;IAEhC;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,yBAAyB,CAAC,EAAE,EAAE,kBAAkB;YAC3E,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACzE,IAAI,CAAC,gBAAgB,CAAC,oBAAoB,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC5E;IACH,CAAC;IAED,iBAAiB;IACjB,CAAC;IAED,YAAY;QACV,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC;QAE9D,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE;YAC1B,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAC/C;QAED,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC;IACjE,CAAC;IAED,aAAa;QACX,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9D,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE;YAC1B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SACrC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC,CAAC;IAClE,CAAC;IAEO,cAAc;QACpB,OAAO,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC,CAAC;IAC3D,CAAC;IAED,IAAY,YAAY;QACtB,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,EAA2B,CAAC;QACzD,OAAO,IAAI,CAAC,aAAa,CAAC,uBAAuB,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,CAAC;IACtE,CAAC;IAED,IAAY,SAAS;QACnB,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,EAA2B,CAAC;QACzD,OAAO,IAAI,CAAC,aAAa,CAAC,wBAAwB,CAAC,CAAC;IACtD,CAAC;CACF;AAED,QAAQ,CAAC,gBAAgB,CAAC,aAAa,EAAE,UAAU,KAAY;IAC7D,IAAI,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,IAAI,EAAE;QACxD,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC;KAC3D;AACH,CAAC,CAAC,CAAC","sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst TobagoDropdownEvent = {\n  HIDE: \"tobago.dropdown.hide\",\n  HIDDEN: \"tobago.dropdown.hidden\",\n  SHOW: \"tobago.dropdown.show\",\n  SHOWN: \"tobago.dropdown.shown\"\n};\n\n/**\n * The dropdown implementation of Bootstrap does not move the menu to the tobago-page-menuStore. This behavior is\n * implemented in this class.\n */\nclass Dropdown extends HTMLElement {\n\n  constructor() {\n    super();\n    if (!this.classList.contains(\"tobago-dropdown-submenu\")) { // ignore submenus\n      this.addEventListener(\"shown.bs.dropdown\", this.openDropdown.bind(this));\n      this.addEventListener(\"hidden.bs.dropdown\", this.closeDropdown.bind(this));\n    }\n  }\n\n  connectedCallback(): void {\n  }\n\n  openDropdown(): void {\n    this.dispatchEvent(new CustomEvent(TobagoDropdownEvent.SHOW));\n\n    if (!this.inStickyHeader()) {\n      this.menuStore.appendChild(this.dropdownMenu);\n    }\n\n    this.dispatchEvent(new CustomEvent(TobagoDropdownEvent.SHOWN));\n  }\n\n  closeDropdown(): void {\n    this.dispatchEvent(new CustomEvent(TobagoDropdownEvent.HIDE));\n    if (!this.inStickyHeader()) {\n      this.appendChild(this.dropdownMenu);\n    }\n    this.dispatchEvent(new CustomEvent(TobagoDropdownEvent.HIDDEN));\n  }\n\n  private inStickyHeader(): boolean {\n    return Boolean(this.closest(\"tobago-header.sticky-top\"));\n  }\n\n  private get dropdownMenu(): HTMLDivElement {\n    const root = this.getRootNode() as ShadowRoot | Document;\n    return root.querySelector(\".dropdown-menu[name='\" + this.id + \"']\");\n  }\n\n  private get menuStore(): HTMLDivElement {\n    const root = this.getRootNode() as ShadowRoot | Document;\n    return root.querySelector(\".tobago-page-menuStore\");\n  }\n}\n\ndocument.addEventListener(\"tobago.init\", function (event: Event): void {\n  if (window.customElements.get(\"tobago-dropdown\") == null) {\n    window.customElements.define(\"tobago-dropdown\", Dropdown);\n  }\n});\n"]}