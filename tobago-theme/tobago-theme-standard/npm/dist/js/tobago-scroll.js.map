{"version":3,"file":"tobago-scroll.js","sourceRoot":"../ts/","sources":["tobago-scroll.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;GAeG;AAEH,OAAO,EAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAC,MAAM,mBAAmB,CAAC;AACzD,OAAO,EAAC,QAAQ,EAAC,MAAM,gBAAgB,CAAC;AAExC,MAAM,MAAM;;AAEH,yBAAkB,GAAG,UAAU,OAAoB;IACxD,KAAK,MAAM,KAAK,IAAI,QAAQ,CAAC,sBAAsB,CAAC,OAAO,EAAE,4BAA4B,CAAC,EAAE;QAE1F,MAAM,MAAM,GAAG,KAAK,CAAC,aAAa,CAAC,wCAAwC,CAAqB,CAAC;QACjG,MAAM,MAAM,GAAa,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAClD,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;YACvB,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YAC7B,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;SAC7B;aAAM;YACL,OAAO,CAAC,IAAI,CAAC,2BAA2B,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;SAC1D;QAED,KAAK,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;KACjD;AACH,CAAC,CAAC;AAEK,aAAM,GAAG,UAAU,KAAY;IACpC,MAAM,KAAK,GAAG,KAAK,CAAC,aAA+B,CAAC;IACpD,MAAM,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC;IACpC,MAAM,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;IAClC,MAAM,MAAM,GAAG,KAAK,CAAC,aAAa,CAAC,wCAAwC,CAAqB,CAAC;IACjG,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC,CAAC;AACzD,CAAC,CAAC;AAGJ,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,kBAAkB,EAAE,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;AAChF,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,kBAAkB,EAAE,KAAK,CAAC,YAAY,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC","sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Listener, Order, Phase} from \"./tobago-listener\";\nimport {DomUtils} from \"./tobago-utils\";\n\nclass Scroll {\n\n  static initScrollPosition = function (element: HTMLElement): void {\n    for (const panel of DomUtils.selfOrQuerySelectorAll(element, \"[data-tobago-scroll-panel]\")) {\n\n      const hidden = panel.querySelector(\":scope > [data-tobago-scroll-position]\") as HTMLInputElement;\n      const values: number[] = JSON.parse(hidden.value);\n      if (values.length === 2) {\n        panel.scrollLeft = values[0];\n        panel.scrollTop = values[1];\n      } else {\n        console.warn(\"Wrong syntax for scroll: \" + hidden.value);\n      }\n\n      panel.addEventListener(\"scroll\", Scroll.scroll);\n    }\n  };\n\n  static scroll = function (event: Event): void {\n    const panel = event.currentTarget as HTMLDivElement;\n    const scrollLeft = panel.scrollLeft;\n    const scrollTop = panel.scrollTop;\n    const hidden = panel.querySelector(\":scope > [data-tobago-scroll-position]\") as HTMLInputElement;\n    hidden.value = JSON.stringify([scrollLeft, scrollTop]);\n  };\n}\n\nListener.register(Scroll.initScrollPosition, Phase.DOCUMENT_READY, Order.LATER);\nListener.register(Scroll.initScrollPosition, Phase.AFTER_UPDATE, Order.LATER);\n"]}