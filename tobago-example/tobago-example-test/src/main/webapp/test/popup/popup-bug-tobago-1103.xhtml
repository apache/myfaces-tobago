<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->

<f:view
    xmlns:tc="http://myfaces.apache.org/tobago/component"
    xmlns:tx="http://myfaces.apache.org/tobago/extension"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core">

  <tc:page width="600px" height="350px" id="page">

    <f:facet name="layout">
      <tc:gridLayout margin="100px"/>
    </f:facet>

    <tc:box label="Page">
      <f:facet name="layout">
        <tc:gridLayout rows="*;auto"/>
      </f:facet>
      <tc:out value="Test: Open all popups (also the date picker). Then try to close all."/>
      <tc:panel>
        <f:facet name="layout">
          <tc:gridLayout columns="auto;*"/>
        </f:facet>
        <tc:button label="Open Popup (AJAX)" id="open-0">
          <f:ajax render="popup-1" execute="popup-1"/>
          <f:facet name="popup">
            <tc:popup width="400px" height="150px" left="150px" top="150px" id="popup-1">
              <tc:box label="Popup Level 1" id="box-1">
                <f:facet name="layout">
                  <tc:gridLayout rows="auto;auto;*;auto"/>
                </f:facet>
                <tc:panel>
                  <f:facet name="layout">
                    <tc:gridLayout columns="*;*;*;*"/>
                  </f:facet>
                  <tc:button label="Open Sub Popup (AJAX)" id="open-1">
                    <f:ajax render="popup-2" execute="popup-2"/>
                    <f:facet name="popup">
                      <tc:popup width="400px" height="150px" left="200px" top="200px" id="popup-2">
                        <tc:box label="Popup Level 2" id="box-2">
                          <f:facet name="layout">
                            <tc:gridLayout rows="auto;auto"/>
                          </f:facet>
                          <tx:date label="Date" id="txdate" fieldId="date" pickerId="picker" formId="form">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                          </tx:date>
                          <tc:button label="Open Sub Popup (AJAX)" id="open-2">
                            <f:ajax render="popup-3" execute="popup-3"/>
                            <f:facet name="popup">
                              <tc:popup modal="false" width="200px" height="53px" left="250px" top="250px" id="popup-3">
                                <tc:box label="Popup Level 3 (non modal)" id="box-3">
                                  <f:facet name="layout">
                                    <tc:gridLayout rows="auto;*"/>
                                  </f:facet>
                                  <tc:button label="Cancel" id="close-3">
                                    <tc:attribute name="popupClose" value="immediate"/>
                                  </tc:button>
                                  <tc:panel/>
                                </tc:box>
                              </tc:popup>
                            </f:facet>
                          </tc:button>
                          <tc:button label="Cancel" id="close-2">
                            <tc:attribute name="popupClose" value="immediate"/>
                          </tc:button>
                          <tc:panel/>
                        </tc:box>
                      </tc:popup>
                    </f:facet>
                  </tc:button>
                  <tc:button label="Cancel" id="close-1">
                    <tc:attribute name="popupClose" value="immediate"/>
                  </tc:button>
                </tc:panel>
              </tc:box>
            </tc:popup>
          </f:facet>
        </tc:button>
      </tc:panel>
    </tc:box>
  </tc:page>
</f:view>
